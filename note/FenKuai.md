# 分块

(施工中)

[OIwiki上关于分块的介绍](https://oi-wiki.org/ds/decompose/)


## [分块入门例题题单(LOJ)](https://loj.ac/p?keyword=%E5%88%86%E5%9D%97&tagIds=207)

_**[解析 by hzwer](http://hzwer.com/8053.html)**_

### 个人题解（方法有些不同&尝试说得更具体一点）：
#### [分块1：](https://loj.ac/p/6277)
_[参考代码](/LOJ/%236277.cpp)_

用a存放原数组，b存放每个整块上的标记，s存放每个块的和。

构建a数组时，顺便初始化s数组。

当对一个区间[l,r]进行操作时：

· 如果l和r在一个块上，那么直接暴力加

· 接着讨论最一般的情况：

| l | 完整的块 | ... | 完整的块 | r |
|---|----------|----|----------|---|

l和r两头都是不完整的块，中间包着n个完整的块。 $(n\in N)$

**更新时：**

对于不完整的块，直接暴力处理，如上述特殊情况；

对于完整的块，不用修改a，在b上做标记即可。

**查询时：**

直接返回`a[x]`与x所在块的标记`b[id[x]]`即可


#### [分块4：](https://loj.ac/p/6280)
_[参考代码](/LOJ/%236280.cpp)_
在分块1的基础上，再用一个s存放每个区块自身的元素和。

_构建a数组时要初始化s数组。_

**更新**基本不变，维护一下s数组即可。

**查询时：**

对于不完整的块，暴力遍历求和；

对于完整的块，直接加上`s[i]`就行了。

_（需要取模维护!）_

